<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>&#x27;http&#x27; plugin · isomorphic-git</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="There is a default `http` plugin built into isomorphic-git, so you don&#x27;t need to initialize an `http` plugin."/><meta name="docsearch:version" content="1.0.x"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="&#x27;http&#x27; plugin · isomorphic-git"/><meta property="og:type" content="website"/><meta property="og:url" content="https://isomorphic-git.org/"/><meta property="og:description" content="There is a default `http` plugin built into isomorphic-git, so you don&#x27;t need to initialize an `http` plugin."/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://isomorphic-git.org/img/favicon/android-chrome-192x192.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://isomorphic-git.org/blog/atom.xml" title="isomorphic-git Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://isomorphic-git.org/blog/feed.xml" title="isomorphic-git Blog RSS Feed"/><script type="text/javascript" src="/js/announcement.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/en"><img class="logo" src="/img/isomorphic-git-logo.svg" alt="isomorphic-git"/><h2 class="headerTitleWithLogo">isomorphic-git</h2></a><a href="/en/versions"><h3>1.0.x</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/en/alphabetic" target="_self">API Docs</a></li><li class=""><a href="/docs/en/quickstart" target="_self">Guide</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class=""><a href="https://github.com/isomorphic-git/isomorphic-git" target="_self">GitHub</a></li><li class=""><a href="https://npmjs.com/package/isomorphic-git" target="_self">npm</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/isomorphic-git/isomorphic-git.github.io/edit/source/docs/plugin_http.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">&#x27;http&#x27; plugin</h1></header><article><div><span><p>There is a default <code>http</code> plugin built into isomorphic-git, so you don't need to initialize an <code>http</code> plugin.
However, the builtin <code>http</code> plugin isn't perfect, so if you find it wanting you can substitute your own.</p>
<p>If you want to bring your own <code>http</code> plugin, here is how you can initialize one:</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// Using require() in Node.js</span>
<span class="hljs-keyword">const</span> git = <span class="hljs-built_in">require</span>(<span class="hljs-string">"isomorphic-git"</span>);
<span class="hljs-keyword">const</span> { http } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./your-http-plugin"</span>);
git.plugins.set(<span class="hljs-string">"http"</span>, http);

<span class="hljs-comment">// using ES6 modules</span>
<span class="hljs-keyword">import</span> { plugins } <span class="hljs-keyword">from</span> <span class="hljs-string">"isomorphic-git"</span>;
<span class="hljs-keyword">import</span> { http } <span class="hljs-keyword">from</span> <span class="hljs-string">"./your-http-plugin"</span>;
plugins.set(<span class="hljs-string">"http"</span>, http);
</code></pre>
<blockquote>
<p>Note: only one <code>http</code> plugin can be registered at a time.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="implementing-your-own-http-plugin"></a><a href="#implementing-your-own-http-plugin" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implementing your own <code>http</code> plugin</h3>
<p>Note that unlike many other plugins, the <code>http</code> plugin is not an object with properties but a single function.
An <code>http</code> plugin must implement the following API:</p>
<h4><a class="anchor" aria-hidden="true" id="githttpplugin"></a><a href="#githttpplugin" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>GitHttpPlugin</h4>
<pre><code class="hljs css language-js"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">http</span> (<span class="hljs-params">{
  core,
  emitter,
  emitterPrefix,
  url,
  method,
  headers,
  body
}</span>) </span>{
  ...
  <span class="hljs-comment">// Do stuff</span>
  ...
  return {
    url,
    method,
    headers,
    body,
    statusCode,
    statusMessage
  }
}
</code></pre>
<h5><a class="anchor" aria-hidden="true" id="parameters"></a><a href="#parameters" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameters</h5>
<table>
<thead>
<tr><th>param</th><th>type [= default]</th><th>description</th></tr>
</thead>
<tbody>
<tr><td>core</td><td>string</td><td>If your <code>http</code> plugin needs access to other plugins, it can do so via <code>git.cores.get(core)</code></td></tr>
<tr><td>emitter</td><td><a href="./plugin_emitter.md">Emitter</a></td><td>If your <code>http</code> plugin emits events, it can do so via <code>emitter.emit()</code></td></tr>
<tr><td>emitterPrefix</td><td>string</td><td>The <code>emitterPrefix</code> passed by the user when calling a function. If your plugin emits events, prefix the event name with this.</td></tr>
<tr><td><strong>url</strong></td><td>string</td><td>The URL to request</td></tr>
<tr><td><strong>method</strong></td><td>string = 'GET'</td><td>The HTTP method to use</td></tr>
<tr><td><strong>headers</strong></td><td>object = {}</td><td>Headers to include in the HTTP request</td></tr>
<tr><td><strong>body</strong></td><td>AsyncIterableIterator&lt;Uint8Array&gt;</td><td>An async iterator of Uint8Arrays that make up the body of POST requests</td></tr>
</tbody>
</table>
<h5><a class="anchor" aria-hidden="true" id="return-values"></a><a href="#return-values" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Return values</h5>
<table>
<thead>
<tr><th>param</th><th>type [= default]</th><th>description</th></tr>
</thead>
<tbody>
<tr><td><strong>url</strong></td><td>string</td><td>The final URL that was fetched after any redirects</td></tr>
<tr><td><strong>method</strong></td><td>string</td><td>The HTTP method that was used</td></tr>
<tr><td><strong>headers</strong></td><td>object</td><td>HTTP response headers</td></tr>
<tr><td><strong>body</strong></td><td>AsyncIterableIterator&lt;Uint8Array&gt;</td><td>An async iterator of Uint8Arrays that make up the body of the response</td></tr>
</tbody>
</table>
<p>Both requests and responses are &quot;streaming&quot; in the sense that they are async iterables.
You don't <em>have</em> to support streaming (and in some cases, like uploads in the browser, it may not be possible) but it is nice to have.
If you are not streaming responses, you can simply fake it by returning an Array with a single Uint8Array inside it.
This works because the async iteration protocol (<code>for await ... of</code>) will fallback to the sync iteration protocol, which is supported by plain Arrays.</p>
</span></div></article></div><div class="docs-prevnext"></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/isomorphic-git-logo.svg" alt="isomorphic-git" width="66" height="58"/></a><div class="footerSection"><h5>Docs</h5><a href="/docs/en/quickstart">Getting Started</a><a href="/docs/en/alphabetic">API Reference</a></div><div><h5>Community</h5><a href="/en/users">User Showcase</a><a href="https://gitter.im/isomorphic-git/Lobby">Project Chat</a><div><a href="https://github.com/isomorphic-git/isomorphic-git">GitHub <span id="gitHubStars"></span></a><script>
void async function() {
  const response = await fetch('https://api.github.com/repos/isomorphic-git/isomorphic-git', {
    headers: { accept: 'application/vnd.github.v3+json' }
  })
  const data = await response.json()
  document.querySelector('#gitHubStars').textContent = '(' + data.stargazers_count + '⭐)'
}()
</script></div></div><div><h5>More</h5><a href="/docs/en/in-the-news">In The News</a><a href="/blog">Blog</a></div></section><script type="text/javascript">let el = document.querySelector('.navListItemActive'); if (el) el.scrollIntoView({ block: 'nearest' })</script><script type="text/javascript" src="/js/gitter.js"></script><script type="text/javascript" src="/js/sidecar.v1.js"></script><script type="text/javascript" src="/js/codemirrorify.js"></script><script type="text/javascript" src="https://unpkg.com/@isomorphic-git/lightning-fs"></script><script type="text/javascript" src="/js/isomorphic-git/index.umd.min.js"></script><script type="module" src="/js/tutorial.js"></script><script type="module" src="/js/try-it-out-giturl.js"></script><script type="text/javascript" src="https://unpkg.com/@webcomponents/shadydom"></script><script type="text/javascript" src="/js/object-inspector.min.js"></script><script data-domain="isomorphic-git.org" src="https://plausible.io/js/plausible.js"></script></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'ac63b0df4513e31143eef156f520056c',
                indexName: 'isomorphic_git',
                inputSelector: '#search_input_react',
                algoliaOptions: {"typoTolerance":"min"}
              });
            </script></body></html>